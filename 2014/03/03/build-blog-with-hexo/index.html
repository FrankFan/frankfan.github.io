<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 基于Hexo搭建个人博客 · Frank Fan's Blog</title><meta name="description" content="基于Hexo搭建个人博客 - Frank Fan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://fy98.com/atom.xml" title="Frank Fan's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">基于Hexo搭建个人博客</h1><div class="post-info">2014年3月3日</div><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Hexo出自台湾大学生之手，是一款基于node.js的静态博客框架程序，使用方便，编译速度快，几道命令就能拥有一个自己的个人博客，比基于Ruby的Jekyll用起来很舒服。<br>Hexo相对于Wordpress来说，最大的区别就是一个完全静态，静态博客的特点：</p>
<ul>
<li>不用配置服务器</li>
<li>不用数据库</li>
<li>访问速度相当快</li>
<li>支持markdown方式书写</li>
<li>没有安全性可言（代码都托管在github或者gitcafe）</li>
<li>更加注重博客内容</li>
</ul>
<p>我的博客是托管在<code>github pages</code>上的，具体做法可以参考 <a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a></p>
<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="安装Node-js环境"><a href="#安装Node-js环境" class="headerlink" title="安装Node.js环境"></a>安装Node.js环境</h3><p>到<a href="http://www.nodejs.org" target="_blank" rel="noopener">Node.js官网</a>下载相应平台的最新版本，安装即可。<br>我用的版本是：<br><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fsc02h32r0j30dg08d3yn.jpg" alt=""></p>
<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><p>npm是node package manager的缩写，成功安装node后就可以使用了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">npm install <span class="comment"># 根据package.json安装依赖模块</span></span><br></pre></td></tr></table></figure></p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>也可以cd到目标目录，执行hexo init</p>
</blockquote>
<h3 id="生成静态页面"><a href="#生成静态页面" class="headerlink" title="生成静态页面"></a>生成静态页面</h3><p>cd到你的init目录，执行generate命令，博客静态页面将会生成到目录hexo/public 下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure></p>
<h3 id="本地启动预览模式"><a href="#本地启动预览模式" class="headerlink" title="本地启动预览模式"></a>本地启动预览模式</h3><p>执行以下命令，启动本地服务，开启预览模式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure></p>
<p>hexo会自动打开浏览器地址为 <a href="http://localhost:40000" target="_blank" rel="noopener">http://localhost:40000</a> 的地址，一个博客的雏形就可以看到。最好使用现在浏览器，如Chrome、Firefox等，因为有些特性不被古老的浏览器不所支持。</p>
<h3 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h3><p>hexo和jekyll一样，都可以用markdown来写博客，这也是吸引我的原因之一。<br>执行new命令，hexo会生成指定名称的文章至目录hexo/source/_posts/postName.md<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] <span class="string">'postName'</span> <span class="comment"># 新建文章</span></span><br></pre></td></tr></table></figure></p>
<p>其中layout是可选参数，默认值是post，具体有哪些值可以到hexo/scaffolds/目录下看，文件名就是layout名称。<br>其实也可以通过手动的方式在_posts目录下新建文章。</p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><p>写完第一篇文章就可以发布了，让我们拭目以待吧。在init的目录下执行以下命令，会在hexo根目录生成一个.deploy目录，放置编译后的html文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo delpoy</span><br></pre></td></tr></table></figure></p>
<p>执行deploy命令之后，hexo的目录结构如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── .deploy</span><br><span class="line">├── node_modules</span><br><span class="line">├── public</span><br><span class="line">├── scaffolds</span><br><span class="line">├── scripts</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">|   └── about</span><br><span class="line">|   └── 404.html</span><br><span class="line">|   └── CNAME</span><br><span class="line">├── themes</span><br><span class="line">├── _config.yml</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure></p>
<ul>
<li>.deploy：执行hexo deploy命令后准备发布的内容</li>
<li>node_modules：执行npm install安装的组件</li>
<li>public：执行 hexo g命令后，输出的静态html内容</li>
<li>scaffolds：脚手架，layout模板文件目录</li>
<li>scripts：扩展脚本目录，可以自定义javascript脚本</li>
<li>source：文章的源码目录，该目录下的markdown和html均会被hexo处理；404文件、CNAME文件都应该放在这里<ul>
<li>drafts：草稿</li>
<li>posts：要发布的文章</li>
</ul>
</li>
<li>themes：主题</li>
<li>_config.yml：全局配置文件，大多数设置都在这里</li>
<li>package.json：配置文件，说明nodejs依赖</li>
</ul>
<h3 id="常用命令总结"><a href="#常用命令总结" class="headerlink" title="常用命令总结"></a>常用命令总结</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"postName"</span> <span class="comment"># 新建文章</span></span><br><span class="line">hexo new page <span class="string">"about"</span> <span class="comment"># 新建页面</span></span><br><span class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">hexo server <span class="comment">#开启预览访问端口（默认端口4000，'ctrl + c'关闭server）</span></span><br><span class="line">hexo deploy <span class="comment">#将.deploy目录部署到GitHub</span></span><br><span class="line">hexo clean <span class="comment"># 有时候配置没有立即生效需要删除cache</span></span><br></pre></td></tr></table></figure>
<p>如果觉得以上这些命令太长的话，可以使用对应的简写方式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n === hexo new <span class="comment"># 新建文章</span></span><br><span class="line">hexo g === hexo generate <span class="comment"># 生成html</span></span><br><span class="line">hexo s === hexo server <span class="comment"># 启动预览</span></span><br><span class="line">hexo d === hexo deploy <span class="comment"># 一键发布</span></span><br></pre></td></tr></table></figure></p>
<h2 id="自定义博客"><a href="#自定义博客" class="headerlink" title="自定义博客"></a>自定义博客</h2><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>首先要下载主题放在themes目录下，<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo/themes</span><br><span class="line">git <span class="built_in">clone</span> remote_themes_url</span><br></pre></td></tr></table></figure></p>
<p>然后修改配置文件_config.yml 的 theme配置项：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://github.com/hexojs/hexo/wiki/Plugins</span><br><span class="line">## Themes: https://github.com/hexojs/hexo/wiki/Themes</span><br><span class="line">theme: jacman</span><br><span class="line">exclude_generator:</span><br><span class="line">Plugins:</span><br><span class="line">- hexo-generator-feed</span><br><span class="line">- hexo-generator-sitemap</span><br></pre></td></tr></table></figure></p>
<h3 id="配置发布信息"><a href="#配置发布信息" class="headerlink" title="配置发布信息"></a>配置发布信息</h3><p>在根目录下_config.yml文件中添加deploy配置项，每次执行hexo d命令后会自动把deploy目录中的内容push到github上。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: github</span><br><span class="line">  repository: https://github.com/FrankFan/frankfan.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p>
<h3 id="添加自定义页面"><a href="#添加自定义页面" class="headerlink" title="添加自定义页面"></a>添加自定义页面</h3><p>执行以下命令，可以添加一个新页面：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">"about"</span></span><br></pre></td></tr></table></figure></p>
<p>该命令会生成hexo/source/about/index.md文件，该文件继承了站点的风格，只需编辑编辑markdown文件即可。<br>最后不要忘记在theme的配置文件中显示出来：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##### Menu</span></span><br><span class="line">menu:</span><br><span class="line">  首页: /</span><br><span class="line">  归档: /archives</span><br><span class="line">  关于: /about</span><br></pre></td></tr></table></figure></p>
<h3 id="添加统计"><a href="#添加统计" class="headerlink" title="添加统计"></a>添加统计</h3><p>hexo默认使用Google Analytics，但是ga经常被墙从而会导致一些没有翻墙工具的用户加载速度过慢，转而使用百度统计。添加统计配置很简单，编辑theme目录下的_config.yml文件，增加配置项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">baidu_tongji: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p>然后新建文件 theme/jackman/layout/_partial/baidu_tongji.ejs , 内容如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.baidu_tongji)&#123; %&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">#你的百度统计代码,可以从百度统计官网注册获得</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>最后，编辑文件 hexo/themes/jackman/_partial/footer.ejs,在最后添加一行代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- partial(<span class="string">'baidu_tongji'</span>) %&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="添加自定义（微博）挂件"><a href="#添加自定义（微博）挂件" class="headerlink" title="添加自定义（微博）挂件"></a>添加自定义（微博）挂件</h3><p>除了hexo默认提供的挂件外，还可有自定义小挂件，比如添加一个微博挂件。<br>首先在hexo/themes/jackman/layout/_widget/目录下新建一个ejs文件，如weibo.ejs，然后在配置文件hexo/themes/jackman/_config.yml中添加配置：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#### Widgets</span><br><span class="line">widgets: </span><br><span class="line">- category</span><br><span class="line">- weibo</span><br><span class="line">- rss</span><br></pre></td></tr></table></figure></p>
<p>微博挂件代码可以从<a href="http://open.weibo.com/widgets?cat=wb" target="_blank" rel="noopener">这里</a>获取。</p>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>首先安装插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;plugin-name&gt; --save</span><br></pre></td></tr></table></figure></p>
<p>然后在hexo根目录下配置文件_config.yml中启用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Plugins:</span><br><span class="line">- hexo-generator-feed <span class="comment">## RSS插件</span></span><br><span class="line">- hexo-generator-sitemap</span><br></pre></td></tr></table></figure></p>
<p>插件的升级与卸载：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">npm uninstall &lt;plugin-name&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h3><p>图床问题可参考我之前的<a href="http://fy98.com/2014/03/15/2014-03-15-cnblogs-image-bed/">这篇文章</a>，完美解决使用markdown书写文章的图片问题。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>更新 hexo：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update -g hexo</span><br></pre></td></tr></table></figure></p>
<p>更新主题：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes/theme_name</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure></p>
<h2 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h2><p>博主携每一颗DOM元素、每一个CSS样式以及每一句Javascript代码感谢以下网友的文章，排名不分先后：</p>
<ol>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="noopener">hexo你的博客</a></li>
<li><a href="http://cnfeat.com/2014/05/10/2014-05-11-how-to-build-a-blog/" target="_blank" rel="noopener">如何搭建一个独立博客——简明Github Pages与Hexo教程</a></li>
<li><a href="http://www.cnblogs.com/" target="_blank" rel="noopener">感谢博客园伴我成长</a></li>
<li><a href="http://www.dnspod.cn/" target="_blank" rel="noopener">感谢Dnspod提供免费域名解析服务,恭喜被企鹅收了</a></li>
<li><a href="http:///www.github.com/" target="_blank" rel="noopener">感谢强大的github提供免费资源托管</a></li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/2014/03/15/2014-03-15-cnblogs-image-bed/" class="prev">PREV</a></div><div class="copyright"><p>© 2014 - 2018 <a href="http://fy98.com">Frank Fan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>