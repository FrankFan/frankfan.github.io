<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> git进阶 · Frank Fan's Blog</title><meta name="description" content="git进阶 - Frank Fan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://fy98.com/atom.xml" title="Frank Fan's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">git进阶</h1><div class="post-info">2016年1月29日</div><div class="post-content"><h2 id="多出来的commit"><a href="#多出来的commit" class="headerlink" title="多出来的commit"></a>多出来的commit</h2><p>Git从将远程分支与本地分支合并可以有两种方式，一种是 <code>git pull</code>, 另一种是 <code>git fetch + git rebase</code>.<br>区分在于 <code>git pull</code> 是把远程分支代码拉下来，与本地分支进行merge操作，相当于<code>git fetch + git merge</code>；<br>所以使用<code>git pull</code>命令之后，会自动多出来一次merge的commit，从<code>git log</code>上面看到的情况就是多了一次commit, 而且git树也不那么整洁了。<br>推荐的做法是使用rebase而不是pull, 可以<code>git fetch ; git rebase</code> ，也可以<code>git pull —rebase</code>.</p>
<h2 id="tag-管理"><a href="#tag-管理" class="headerlink" title="tag 管理"></a>tag 管理</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看tag</span></span><br><span class="line">$ git tag | grep dev_20150525</span><br><span class="line"><span class="comment"># 创建tag</span></span><br><span class="line">$ git tag dev_20150525_16 -m <span class="string">'comment'</span></span><br><span class="line"><span class="comment"># 把tag push到远程</span></span><br><span class="line">$ git push origin dev_20150525_16</span><br><span class="line">$ git push origin --tags</span><br><span class="line"></span><br><span class="line">Counting objects: 1, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (1/1), 156 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 1 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:FrankFan/fxxxk.git</span><br><span class="line"> * [new tag]         test_tag1 -&gt; test_tag1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除tag 本地删除</span></span><br><span class="line">$ git tag -d test_tag1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程的tag:推一个空的上去</span></span><br><span class="line"><span class="comment">#有的gitlab没有删除远程tag的权限</span></span><br><span class="line">$ git push origin :refs/tags/reg_201050709_01</span><br></pre></td></tr></table></figure>
<h2 id="git-stash-暂存"><a href="#git-stash-暂存" class="headerlink" title="git stash 暂存"></a>git stash 暂存</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 缓存到暂存区</span></span><br><span class="line">$ git stash</span><br><span class="line"><span class="comment"># 取出来</span></span><br><span class="line">$ git stash pop</span><br><span class="line"><span class="comment"># 查看暂存列表</span></span><br><span class="line">$ git stash list</span><br><span class="line"><span class="comment"># 清空</span></span><br><span class="line">$ git stash clear</span><br></pre></td></tr></table></figure>
<p>注意： <code>stash</code> 尽量少用，最好只缓存一次，不然顺序会搞不好弄乱的。</p>
<h2 id="添加一个忽略文件到-gitignore"><a href="#添加一个忽略文件到-gitignore" class="headerlink" title="添加一个忽略文件到 gitignore"></a>添加一个忽略文件到 gitignore</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached your_ignored_file</span><br></pre></td></tr></table></figure>
<h2 id="一个好看的git-log"><a href="#一个好看的git-log" class="headerlink" title="一个好看的git log"></a>一个好看的git log</h2><p>默认 <code>git log</code> 样式不太好看，用 alias 换成一个比较好看的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.lg <span class="string">"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blu</span></span><br><span class="line"><span class="string">e)&lt;%an&gt;%Creset' --abbrev-commit"</span></span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2016/03/18/ubuntu-in-vps/" class="prev">上一篇</a><a href="/2016/01/08/cmd-line-in-Mac-OS/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2018 <a href="http://fy98.com">Frank Fan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>